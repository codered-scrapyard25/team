import React, { useState, useEffect } from 'react';

const CodeRedTeamIntro = () => {
  const [selectedMember, setSelectedMember] = useState(null);
  const [loading, setLoading] = useState(true);
  const [clickPosition, setClickPosition] = useState({ x: 0, y: 0 });
  const [clickedMemberId, setClickedMemberId] = useState(null);
  
  useEffect(() => {
    // Simulate loading time
    const timer = setTimeout(() => {
      setLoading(false);
    }, 2500);
    
    return () => clearTimeout(timer);
  }, []);
  
  const teamMembers = [
    {
      id: 1,
      name: "Vaibhav",
      nickname: "YB",
      role: "Lead Developer",
      bio: "Specializes in backend architecture and database optimization. Known for solving complex problems with elegant solutions. Always has a cup of coffee nearby.",
      avatar: "V"
    },
    {
      id: 2,
      name: "Veekshith",
      nickname: "Veek",
      role: "Frontend Specialist",
      bio: "UI/UX expert who turns wireframes into beautiful interfaces. Has an eye for detail and can spot a misaligned pixel from miles away.",
      avatar: "V"
    },
    {
      id: 3,
      name: "Snithik",
      nickname: "Snikki",
      role: "Systems Engineer",
      bio: "Infrastructure guru who makes sure everything runs smoothly behind the scenes. Can debug a server in his sleep.",
      avatar: "S"
    },
    {
      id: 4,
      name: "Jimit",
      nickname: "JimJam",
      role: "Project Manager",
      bio: "Keeps the team organized and projects on schedule. Master of agile methodologies and team motivation. Always has a plan B.",
      avatar: "J"
    }
  ];
  
  const handleSelectMember = (member, event) => {
    // Capture click position for zoom effect
    const rect = event.currentTarget.getBoundingClientRect();
    setClickPosition({
      x: rect.left + rect.width / 2,
      y: rect.top + rect.height / 2
    });
    setClickedMemberId(member.id);
    
    // Short delay before showing the expanded view
    setTimeout(() => {
      setSelectedMember(member);
    }, 150);
  };
  
  const handleClose = () => {
    setSelectedMember(null);
    
    // Reset clicked member after animation completes
    setTimeout(() => {
      setClickedMemberId(null);
    }, 600);
  };
  
  if (loading) {
    return (
      <div className="w-full h-screen flex items-center justify-center bg-black">
        <div className="animate-spin w-32 h-32 relative">
          <svg viewBox="0 0 100 100" className="w-full h-full">
            {/* Swastika symbol exactly matching the provided image */}
            <path 
              d="M50 25 L75 25 L75 0 L50 0 L50 25 L25 25 L25 50 L50 50 L50 75 L75 75 L75 50 L100 50 L100 75 L75 100 L50 100 L50 75 L25 75 L25 50 L0 50 L0 25 L25 0 L50 0 L50 25Z" 
              fill="#DC2626" 
              stroke="none"
            />
          </svg>
          <div className="absolute inset-0 rounded-full bg-red-600/10 blur-xl"></div>
        </div>
      </div>
    );
  }
  
  return (
    <div className="w-full h-full min-h-screen flex flex-col items-center justify-center bg-black p-8">
      <div className="mb-12 text-center">
        <h1 className="text-5xl font-bold text-white mb-3">
          <span className="text-red-600">Code</span>Red
        </h1>
        <p className="text-gray-400 italic">"The best Scrapyard team in existence."</p>
      </div>
      
      <div className="flex flex-row gap-6 justify-center flex-wrap">
        {teamMembers.map((member) => (
          <div 
            key={member.id}
            onClick={(e) => handleSelectMember(member, e)}
            className={`relative w-64 h-32 bg-black border-2 rounded-lg overflow-hidden cursor-pointer transition-all duration-700 ${
              clickedMemberId === member.id && selectedMember ? 'opacity-0 scale-150' : 
              clickedMemberId && !selectedMember ? 'scale-100 opacity-100' : 
              'scale-100'
            } group`}
            style={{ 
              borderColor: 'rgba(220, 38, 38, 0.7)',
              boxShadow: '0 0 0px rgba(220, 38, 38, 0)',
              transition: 'all 0.7s cubic-bezier(0.22, 1, 0.36, 1)'
            }}
          >
            {/* Subtle border glow effect */}
            <div className="absolute inset-0 opacity-0 group-hover:opacity-100 transition-all duration-700 z-10 pointer-events-none">
              <div className="absolute -inset-0.5 bg-gradient-to-r from-red-600 to-red-900 rounded-lg opacity-0 group-hover:opacity-100 blur-sm transition-all duration-700"></div>
            </div>
            
            <div className="relative z-20 h-full p-4 flex bg-black group-hover:bg-black/90 transition-colors duration-700">
              <div className="h-full w-1/3">
                <div className="w-16 h-16 rounded-full bg-gradient-to-br from-red-700 to-red-900 flex items-center justify-center text-white font-bold text-xl overflow-hidden border border-red-500/30 group-hover:border-red-500/80 transition-all duration-700">
                  <img src={`/api/placeholder/160/160`} alt={member.name} className="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity duration-700 scale-105 group-hover:scale-110 transition-transform" />
                </div>
              </div>
              <div className="w-2/3">
                <h3 className="text-white font-semibold">{member.name}</h3>
                <p className="text-gray-400 text-sm group-hover:text-red-400 transition-colors duration-700">"{member.nickname}"</p>
                <p className="text-red-600 text-sm mt-2 opacity-80 group-hover:opacity-100 transition-opacity duration-700">{member.role}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
      
      {selectedMember && (
        <div 
          className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-30 transition-all duration-700" 
          onClick={handleClose}
          style={{ 
            animation: 'fadeIn 0.7s cubic-bezier(0.22, 1, 0.36, 1)',
          }}
        >
          <div 
            className="w-full max-w-lg bg-black border-2 border-red-600 rounded-lg p-6 relative transition-all"
            onClick={(e) => e.stopPropagation()}
            style={{ 
              animation: `luxuryZoomIn 0.7s cubic-bezier(0.22, 1, 0.36, 1)`,
              boxShadow: '0 0 30px rgba(220, 38, 38, 0.4), 0 0 15px rgba(220, 38, 38, 0.2) inset',
              transformOrigin: `${clickPosition.x}px ${clickPosition.y}px`
            }}
          >
            <div className="absolute -inset-0.5 bg-gradient-to-r from-red-700 to-red-900 rounded-lg opacity-50 blur-sm -z-10"></div>
            
            <button 
              onClick={handleClose}
              className="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors duration-300"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
            
            <div className="flex items-center mb-6">
              <div className="w-24 h-24 rounded-full bg-gradient-to-br from-red-700 to-red-900 flex items-center justify-center overflow-hidden border-2 border-red-500/80 shadow-lg shadow-red-900/30">
                <img src={`/api/placeholder/240/240`} alt={selectedMember.name} className="w-full h-full object-cover" />
              </div>
              <div className="ml-4">
                <h2 className="text-2xl font-bold text-white">{selectedMember.name}</h2>
                <p className="text-red-500 font-light">"{selectedMember.nickname}"</p>
                <p className="text-gray-300 mt-1 font-light">{selectedMember.role}</p>
              </div>
            </div>
            
            <div className="bg-gradient-to-br from-gray-900/80 to-black/80 p-5 rounded-lg border border-red-900/30">
              <p className="text-gray-300 leading-relaxed">{selectedMember.bio}</p>
            </div>
            
            <div className="mt-6 flex justify-between">
              <div className="text-gray-400">
                <span className="text-red-500 font-medium">Code</span>Red Member
              </div>
              <div className="text-gray-500 text-sm">
                Click outside to close
              </div>
            </div>
          </div>
        </div>
      )}
      
      <style jsx global>{`
        @keyframes luxuryZoomIn {
          0% {
            opacity: 0;
            transform: scale(0.2);
            filter: blur(10px);
          }
          40% {
            opacity: 1;
            filter: blur(0px);
          }
          100% {
            transform: scale(1);
          }
        }
        
        @keyframes fadeIn {
          0% {
            opacity: 0;
          }
          100% {
            opacity: 1;
          }
        }
        
        @keyframes subtlePulse {
          0% {
            box-shadow: 0 0 5px rgba(220, 38, 38, 0.3);
          }
          50% {
            box-shadow: 0 0 15px rgba(220, 38, 38, 0.6);
          }
          100% {
            box-shadow: 0 0 5px rgba(220, 38, 38, 0.3);
          }
        }
      `}</style>
      
      <div className="mt-12 text-center text-gray-500 text-sm">
        <p>Â© 2025 CodeRed. Team</p>
      </div>
    </div>
  );
};

export default CodeRedTeamIntro;